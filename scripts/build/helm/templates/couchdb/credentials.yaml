apiVersion: v1
kind: Secret
metadata:
  name: cht-couchdb-credentials
type: Opaque
stringData:
  COUCHDB_PASSWORD: {{ required "You must set couchdb.password!" .Values.couchdb.password }} # Required validation
  COUCHDB_SECRET: {{ required "You must set couchdb.secret!" .Values.couchdb.secret }}  # Required validation
  COUCHDB_USER: {{ .Values.couchdb.user | default "medic" }} # Fallback for backward compatibility
  COUCHDB_UUID: {{ required "You must set couchdb.uuid!" .Values.couchdb.uuid }} # Required validation
  COUCH_URL: http://{{ .Values.couchdb.user }}:{{ .Values.couchdb.password | urlquery }}@haproxy.{{ .Values.namespace }}.svc.cluster.local:5984/medic # Default value
